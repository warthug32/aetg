/*
Copyright (c) 2003-2011, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
(function(){function b(b){var c=b.getElementsByTag("*"),d=c.count(),e;for(var f=0;f<d;f++)e=c.getItem(f),function(b){for(var c=0;c<a.length;c++)(function(a){var c=b.getAttribute("on"+a);b.hasAttribute("on"+a)&&(b.removeAttribute("on"+a),b.on(a,function(a){var d=/(return\s*)?CKEDITOR\.tools\.callFunction\(([^)]+)\)/.exec(c),e=d&&d[1],f=d&&d[2].split(","),g=/return false;/.test(c);if(f){var i=f.length,j;for(var l=0;l<i;l++){f[l]=j=CKEDITOR.tools.trim(f[l]);var m=j.match(/^(["'])([^"']*?)\1$/);if(m){f[l]=m[2];continue}if(j.match(/\d+/)){f[l]=parseInt(j,10);continue}switch(j){case"this":f[l]=b.$;break;case"event":f[l]=a.data.$;break;case"null":f[l]=null}}var n=CKEDITOR.tools.callFunction.apply(window,f);e&&n===!1&&(g=1)}g&&a.data.preventDefault()}))})(a[c])}(e)}var a=["click","keydown","mousedown","keypress","mouseover","mouseout"];CKEDITOR.plugins.add("adobeair",{init:function(a){if(!CKEDITOR.env.air)return;a.addCss("body { padding: 8px }"),a.on("uiReady",function(){b(a.container);if(a.sharedSpaces)for(var d in a.sharedSpaces)b(a.sharedSpaces[d]);a.on("elementsPathUpdate",function(a){b(a.data.space)})}),a.on("contentDom",function(){a.document.on("click",function(a){a.data.preventDefault(!0)})})}}),CKEDITOR.ui.on("ready",function(a){var c=a.data;if(c._.panel){var d=c._.panel._.panel,e;(function(){if(!d.isLoaded){setTimeout(arguments.callee,30);return}e=d._.holder,b(e)})()}else c instanceof CKEDITOR.dialog&&b(c._.element)})})(),CKEDITOR.dom.document.prototype.write=CKEDITOR.tools.override(CKEDITOR.dom.document.prototype.write,function(a){function b(a,b,c,d){var e=a.append(b),f=CKEDITOR.htmlParser.fragment.fromHtml(c).children[0].attributes;f&&e.setAttributes(f),d&&e.append(a.getDocument().createText(d))}return function(c,d){if(this.getBody()){var e=this,f=this.getHead();c=c.replace(/(<style[^>]*>)([\s\S]*?)<\/style>/gi,function(a,c,d){return b(f,"style",c,d),""}),c=c.replace(/<base\b[^>]*\/>/i,function(a){return b(f,"base",a),""}),c=c.replace(/<title>([\s\S]*)<\/title>/i,function(a,b){return e.$.title=b,""}),c=c.replace(/<head>([\s\S]*)<\/head>/i,function(a){var b=new CKEDITOR.dom.element("div",e);return b.setHtml(a),b.moveChildren(f),""}),c.replace(/(<body[^>]*>)([\s\S]*)(?=$|<\/body>)/i,function(a,b,c){e.getBody().setHtml(c);var d=CKEDITOR.htmlParser.fragment.fromHtml(b).children[0].attributes;d&&e.getBody().setAttributes(d)})}else a.apply(this,arguments)}});