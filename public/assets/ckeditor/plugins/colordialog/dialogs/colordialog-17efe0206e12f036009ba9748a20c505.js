/*
Copyright (c) 2003-2011, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.html or http://ckeditor.com/license
*/
CKEDITOR.dialog.add("colordialog",function(a){function h(){c.getById(x).removeStyle("background-color"),f.getContentElement("picker","selectedColor").setValue("")}function i(a){a instanceof CKEDITOR.dom.event||(a=new CKEDITOR.dom.event(a));var b=a.getTarget(),c;b.getName()=="a"&&(c=b.getChild(0).getHtml())&&f.getContentElement("picker","selectedColor").setValue(c)}function j(a){a instanceof CKEDITOR.dom.event||(a=a.data);var b=a.getTarget(),d;b.getName()=="a"&&(d=b.getChild(0).getHtml())&&(c.getById(v).setStyle("background-color",d),c.getById(w).setHtml(d))}function k(){c.getById(v).removeStyle("background-color"),c.getById(w).setHtml("&nbsp;")}function r(){function c(b,c){for(var e=b;e<b+3;e++){var f=s.$.insertRow(-1);for(var g=c;g<c+3;g++)for(var h=0;h<6;h++)d(f,"#"+a[g]+a[h]+a[e])}}function d(a,c){var d=new b(a.insertCell(-1));d.setAttribute("class","ColorCell"),d.setStyle("background-color",c),d.setStyle("width","15px"),d.setStyle("height","15px");var e=d.$.cellIndex+1+18*a.rowIndex;d.append(CKEDITOR.dom.element.createFromHtml('<a href="javascript: void(0);" role="option" aria-posinset="'+e+'"'+' aria-setsize="'+234+'"'+' style="cursor: pointer;display:block;width:100%;height:100% " title="'+CKEDITOR.tools.htmlEncode(c)+'"'+' onkeydown="CKEDITOR.tools.callFunction( '+q+', event, this )"'+' onclick="CKEDITOR.tools.callFunction('+n+', event, this ); return false;"'+' tabindex="-1"><span class="cke_voice_label">'+c+"</span>&nbsp;</a>",CKEDITOR.document))}var a=["00","33","66","99","cc","ff"];c(0,0),c(3,0),c(0,3),c(3,3);var e=s.$.insertRow(-1);for(var f=0;f<6;f++)d(e,"#"+a[f]+a[f]+a[f]);for(var g=0;g<12;g++)d(e,"#000000")}var b=CKEDITOR.dom.element,c=CKEDITOR.document,d=CKEDITOR.tools,e=a.lang.colordialog,f,g={type:"html",html:"&nbsp;"},l=d.addFunction(k),m=i,n=CKEDITOR.tools.addFunction(m),o=j,p=k,q=CKEDITOR.tools.addFunction(function(b){b=new CKEDITOR.dom.event(b);var c=b.getTarget(),d,e,f=b.getKeystroke(),g=a.lang.dir=="rtl";switch(f){case 38:if(d=c.getParent().getParent().getPrevious())e=d.getChild([c.getParent().getIndex(),0]),e.focus(),p(b,c),o(b,e);b.preventDefault();break;case 40:if(d=c.getParent().getParent().getNext())e=d.getChild([c.getParent().getIndex(),0]),e&&e.type==1&&(e.focus(),p(b,c),o(b,e));b.preventDefault();break;case 32:m(b),b.preventDefault();break;case g?37:39:if(d=c.getParent().getNext())e=d.getChild(0),e.type==1?(e.focus(),p(b,c),o(b,e),b.preventDefault(!0)):p(null,c);else if(d=c.getParent().getParent().getNext())e=d.getChild([0,0]),e&&e.type==1?(e.focus(),p(b,c),o(b,e),b.preventDefault(!0)):p(null,c);break;case g?39:37:(d=c.getParent().getPrevious())?(e=d.getChild(0),e.focus(),p(b,c),o(b,e),b.preventDefault(!0)):(d=c.getParent().getParent().getPrevious())?(e=d.getLast().getChild(0),e.focus(),p(b,c),o(b,e),b.preventDefault(!0)):p(null,c);break;default:return}}),s=new b("table");r();var t=s.getHtml(),u=function(a){return CKEDITOR.tools.getNextId()+"_"+a},v=u("hicolor"),w=u("hicolortext"),x=u("selhicolor"),y=u("color_table_label");return{title:e.title,minWidth:360,minHeight:220,onLoad:function(){f=this},contents:[{id:"picker",label:e.title,accessKey:"I",elements:[{type:"hbox",padding:0,widths:["70%","10%","30%"],children:[{type:"html",html:'<table role="listbox" aria-labelledby="'+y+'" onmouseout="CKEDITOR.tools.callFunction( '+l+' );">'+(CKEDITOR.env.webkit?"":t)+'</table><span id="'+y+'" class="cke_voice_label">'+e.options+"</span>",onLoad:function(){var a=CKEDITOR.document.getById(this.domId);a.on("mouseover",j),CKEDITOR.env.webkit&&a.setHtml(t)},focus:function(){var a=this.getElement().getElementsByTag("a").getItem(0);a.focus()}},g,{type:"vbox",padding:0,widths:["70%","5%","25%"],children:[{type:"html",html:"<span>"+e.highlight+'</span>\t\t\t\t\t\t\t\t\t\t\t\t<div id="'+v+'" style="border: 1px solid; height: 74px; width: 74px;"></div>\t\t\t\t\t\t\t\t\t\t\t\t<div id="'+w+'">&nbsp;</div><span>'+e.selected+'</span>\t\t\t\t\t\t\t\t\t\t\t\t<div id="'+x+'" style="border: 1px solid; height: 20px; width: 74px;"></div>'},{type:"text",label:e.selected,labelStyle:"display:none",id:"selectedColor",style:"width: 74px",onChange:function(){try{c.getById(x).setStyle("background-color",this.getValue())}catch(a){h()}}},g,{type:"button",id:"clear",style:"margin-top: 5px",label:e.clear,onClick:h}]}]}]}]}});